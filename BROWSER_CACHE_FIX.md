# 🔄 浏览器缓存清除指南

## ❌ 问题

编辑线路时报错：
```
操作失败：Unexpected token '<', "<!doctype".. is not valid JSON
```

## 🔍 原因

**浏览器缓存了旧的 HTML/JavaScript 文件**

- ✅ **后端 API 已经更新并正常工作**（测试通过）
- ❌ **浏览器使用的是旧的前端代码**

## ✅ 解决方法

### 方法 1：强制刷新页面（推荐）

**Windows / Linux:**
```
Ctrl + Shift + R
```
或
```
Ctrl + F5
```

**Mac:**
```
Cmd + Shift + R
```

---

### 方法 2：清除浏览器缓存

#### Chrome / Edge
1. 按 `F12` 打开开发者工具
2. 右键点击浏览器的"刷新"按钮
3. 选择"清空缓存并硬性重新加载"

#### Firefox
1. 按 `Ctrl + Shift + Delete`
2. 选择"缓存"
3. 点击"立即清除"
4. 刷新页面（F5）

---

### 方法 3：使用无痕/隐私模式

1. 打开无痕/隐私窗口：
   - Chrome/Edge: `Ctrl + Shift + N`
   - Firefox: `Ctrl + Shift + P`

2. 访问: `http://localhost:5000`

---

### 方法 4：禁用缓存（开发模式）

**永久禁用缓存（开发期间）：**

1. 按 `F12` 打开开发者工具
2. 点击右上角的 ⚙️ 图标（设置）
3. 找到"Network"部分
4. 勾选 ✅ "Disable cache (while DevTools is open)"
5. **保持开发者工具打开**

---

## 📝 验证修复

刷新页面后，您应该能够：

1. ✅ **编辑代理（不修改名称）** - 直接保存，不报错
2. ✅ **编辑代理（修改名称）** - 正常更新
3. ✅ **删除代理** - 正常删除

---

## 🧪 测试结果

API 测试通过：
```bash
$ python test_api.py

✅ 返回了 JSON
{
  "success": true,
  "message": "代理更新成功",
  "data": { ... },
  "push_result": {
    "success": true,
    "message": "成功推送到 1 个设备"
  }
}
```

这证明后端工作正常，只需要清除浏览器缓存！

---

## 🎯 推荐设置

**开发期间建议：**

1. ✅ 始终保持开发者工具打开
2. ✅ 启用"禁用缓存"选项
3. ✅ 或使用无痕模式访问

这样可以避免缓存问题！

---

## ❓ 如果仍然有问题

如果清除缓存后仍然报错，请：

1. 检查浏览器控制台（F12 → Console）
2. 查看具体的错误信息
3. 检查 Network 标签，看请求的 URL 和响应

---

**完成时间：** 2025-12-30 21:50:00  
**状态：** ✅ 后端已修复，只需清除浏览器缓存

**祝您使用愉快！** 🎊

